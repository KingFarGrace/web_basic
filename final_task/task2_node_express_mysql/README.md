题目一说明文档

###　题目内容

使用`node.js`搭建后端服务器并连接`MySql`数据库实现学生信息的简单增删改查功能。

### 项目结构

> + final_task（期末作业总目录，包含题目一和题目一和题目二的代码）
>
>   > + task1_json_server（题目一所在目录）
>   >
>   > + task2_node_express_mysql（题目二所在目录）
>   >
>   >   > + node_modules（项目所使用的第三方依赖库目录需在使用该项目前自行下载，具体操作见后文）
>   >   >
>   >   > + sql（数据库脚本所在目录）
>   >   >
>   >   >   > + task2.sql（数据库脚本文件）
>   >   >
>   >   > + test（接口测试文件目录）
>   >   >
>   >   >   > + back-end-tests.postman_collection.json（postman测试文件json）
>   >   >
>   >   > + views（html模板文件目录）
>   >   >
>   >   >   > + 404.art（404页面）
>   >   >   > + index.art（网站首页）
>   >   >   > + config.art（数据库连接配置页）
>   >   >   > + add.art（添加学生信息页）
>   >   >   > + update.art（更新学生信息页）
>   >   >   > + query.art（查询学生信息页）
>   >   >   > + delete.art（删除学生信息页）
>   >   >
>   >   > + app.js（后端文件，使用node运行后启动后端服务）
>   >   >
>   >   > + package.json（项目依赖文件，用于还原项目运行环境）

### 如何启动该项目？

1. 进入`task2_node_express_mysql`目录下，控制台输入命令 <code>npm install</code>还原项目运行环境；
2. 使用`sql`目录中的`task2.sql`还原数据库（开发者所使用的版本是MySql5.7）；
3. 如果想要启动一个测试，请使用`postman`导入`test`目录下的测试文件，启动后端服务后进行测试；
4. 控制台输入命令 <code>node app</code> 启动后端服务，此时控制台会输出网站链接，<kbd>Ctrl</kbd> + 鼠标左键点击进入项目前端页面，此时可以使用api与后端交互，网站的具体使用方法如下。

###　关于本项目

后端使用`node.js`建立服务器，使用`express`作为后端代码框架搭建路由和接口服务，并引入`mysql`第三方依赖提供数据库连接，使用`art-template`作为模板引擎将HTML文件渲染到对应的路由上，数据库中存有一批学生信息供前端进行服务请求，支持配置数据库连接，添加、修改、查询和删除五种服务，具体如下：

+ 学生数据结构

  > 学生数据使用表结构存储，包含五个字段：
  >
  > <code>id:</code> 学生学号；
  >
  > <code>name:</code> 学生姓名；
  >
  > <code>age:</code> 学生年龄；
  >
  > `sex:` 学生性别；
  >
  > <code>clazz:</code> 学生班级；

+ 添加学生信息接口（注：前端所有请求均使用axios进行封装发送，下略）

  | 作用描述 | 将学生信息表单封装为json并发送到后端，处理后插入数据库中。   |
  | :------- | :----------------------------------------------------------- |
  | URL      | <code>http://localhost:3000/add</code>                       |
  | 请求方式 | <code>POST</code>                                            |
  | 传入参数 | <code>{ "name": "姓名", "age": “年龄", "sex": “性别", "clazz": "班级" }</code> |
  | 返回数据 | `{ "msg": "响应信息" }`                                      |

+ 修改学生信息接口

  | 作用描述 | 将学生信息表单封装为json并发送到后端，处理后按学号匹配数据库中的信息并更新。 |
  | :------- | :----------------------------------------------------------- |
  | URL      | <code>http://localhost:3000/update</code>                    |
  | 请求方式 | <code>POST</code>                                            |
  | 传入参数 | <code>{ "id": "学号", "name": "姓名", "age": “年龄", "sex": “性别", "clazz": "班级" }</code> |
  | 返回数据 | `{ "msg": "响应信息" }`                                      |

+ 查询学生信息接口

  | 作用描述 | 将学生信息表单封装为json并发送到后端，按学号查找信息并返回。 |
  | :------- | :----------------------------------------------------------- |
  | URL      | <code>http://localhost:3000/query</code>                     |
  | 请求方式 | <code>POST</code>                                            |
  | 传入参数 | <code>{ "id": "学号" }</code>                                |
  | 返回数据 | `{ "msg": "响应信息" }` / <code>{ "id": "学号", name": "姓名", "age": “年龄", "sex": “性别", "clazz": "班级" }</code> |

+ 删除学生信息接口

  | 作用描述 | 将学生信息表单封装为json并发送到后端，处理后插入数据库中。 |
  | :------- | :--------------------------------------------------------- |
  | URL      | <code>http://localhost:3000/delete</code>                  |
  | 请求方式 | <code>POST</code>                                          |
  | 传入参数 | <code>{ "id": "学号" }</code>                              |
  | 返回数据 | `{ "msg": "响应信息" }`                                    |

+ 配置数据库连接接口

  | 作用描述 | 将数据库表单封装为json并发送到后端，判断当前链接信息是否有效（成功建立连接），若有效，则开放对上述四个接口以及对应页面路由的访问权限，否则提示用户配置信息无效。 |
  | :------- | :----------------------------------------------------------- |
  | URL      | <code>http://localhost:3000/setConfig</code>                 |
  | 请求方式 | <code>POST</code>                                            |
  | 传入参数 | <code>{ "host": "服务器URL", "port": "数据库端口号", "user": “数据库用户名", "password": “数据库用户密码", "database": "连接的数据库名" }</code> |
  | 返回数据 | `{ "msg": "响应信息" }`                                      |

+ 现有数据见数据库表或`.sql`脚本文件

#### 特别说明：除了首页以外的文件均引入了`axios CDN`，因此可能会出现页面加载变慢的情况，请耐心等待



